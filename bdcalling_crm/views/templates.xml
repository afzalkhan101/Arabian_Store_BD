<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Custom Add-to-Cart Button -->
    <template id="custom_add_to_cart_button" name="Custom Add to Cart Form">
        <form action="/shop/cart/add" method="post" class="d-inline" t-if="product">
            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
            <input type="hidden" name="product_id" t-att-value="product.id"/>
            <div class="input-group input-group-sm" style="max-width: 200px;">
                <input type="number" 
                       name="add_qty" 
                       class="form-control" 
                       value="1" 
                       min="1"
                       style="max-width: 70px;"/>
                <button type="submit" class="btn btn-primary btn-sm">
                    <i class="fa fa-shopping-cart"/> Add to cart
                </button>
            </div>
        </form>
    </template>

    <!-- Inherit Product Item Template to add custom button -->
    <template id="custom_product_add_to_cart" 
              inherit_id="website_sale.products_item" 
              name="Custom Product Add to Cart">
        <xpath expr="//div[hasclass('product_price')]" position="after">
            <div class="mt-2">
                <t t-call="bdcalling_crm.custom_add_to_cart_button">
                    <t t-set="product" t-value="product"/>
                </t>
            </div>
        </xpath>
    </template>
</odoo>
